---
title: "p8105_hw2_sz3214"
author: "Shizhe Zhang"
date: "2024-09-30"
output: github_document
---

```{r setup, include=FALSE}
library(tidyverse)
library(readr)
```

# Problem 1

## Import and Clean data
```{r}
mta = 
  read_csv('data/NYC_Transit_Subway_Entrance_And_Exit_Data.csv', na = c("NA", ".", "")) |> 
  janitor::clean_names() |> 
  select(line:entry, vending, ada) |> 
  mutate(entry=ifelse(entry == "YES", TRUE, FALSE))
head(mta, 10)
```

The dataset contains variables: `r names(mta)`. 
First, read the cvs file and clean its column names.
Second, select all the variables you want.
Third, change the `entry` variable from character to logical.
The dataset has `r nrow(mta)` rows and `r ncol(mta)` columns.
The dataset is not tidy enough.

## Answer questions

```{r}
distinct(mta, line, station_name) |> 
  nrow()
```
There are 465 distinct stations.

```{r}
filter(mta, ada == TRUE) |> 
  distinct(line, station_name) |> 
  nrow()
```
There are 84 ADA compliant.

```{r}
filter(mta, entry = TRUE, vending == "NO") |> 
  summarise(proportion = n() / nrow(mta)) 
```
The proportion of station entrances / exits without vending allow entrance is 9.8%.


```{r}
mta_edt = mta |> 
  mutate(across(route1:route11, as.character)) |> 
  pivot_longer(
    cols = route1:route11, names_to = "route_number", values_to = "route") 

mta_edt |> 
  filter(route == "A") |> 
  distinct(line, station_name) |> 
  count()

mta_edt |> 
  filter(route == "A", ada == TRUE) |> 
  distinct(line, station_name) |> 
  count()
```
80 distinct stations serve the A train. 
Of the stations that serve the A train, 17 are ADA compliant.













